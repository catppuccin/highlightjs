<!DOCTYPE html>
<html lang="en" x-data="{
  language: 'rust.rs',
  flavor: 'catppuccin-mocha',
  changeSample() {
     return fetch(`https://raw.githubusercontent.com/catppuccin/catppuccin/main/samples/${this.language}`)
      .then(res => res.text())
      .then(text => {
        function encode(e){return e.replace(/[^]/g,function(e){return'&#'+e.charCodeAt(0)+';'})}
        $refs.sample.innerHTML = encode(text);
        $nextTick(() => hljs.highlightElement($refs.sample));
      });
  }
}">
  <head>
    <title>Catppuccin Highlight.js</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="//cdn.tailwindcss.com"></script>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/highlight.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/languages/coffeescript.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/languages/haskell.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/languages/scala.min.js"></script>
    <script defer src="//cdn.jsdelivr.net/npm/alpinejs@3.13.0/dist/cdn.min.js"></script>
    <link rel="stylesheet" :href="() => `/css/${flavor}.css`" />
  </head>
  <body class="min-h-screen mx-auto max-w-3xl relative bg-gray-50 dark:bg-black">
    <div
      class="absolute top-2 right-2 flex gap-4 items-baseline bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-50 rounded px-2 py-1"
    >
      <label for="flavor">Flavor</label>
      <select id="flavor" x-model="flavor" class="border border-gray-500 bg-gray-50 dark:bg-gray-900 rounded px-1">
        <option value="catppuccin-latte">Latte</option>
        <option value="catppuccin-frappe">Frappe</option>
        <option value="catppuccin-macchiato">Macchiato</option>
        <option value="catppuccin-mocha">Mocha</option>
      </select>
      <label for="language">Language</label>
      <select
        id="language"
        x-model="language"
        x-on:change="changeSample()"
        x-init="changeSample()"
        class="border border-gray-500 bg-gray-50 dark:bg-gray-900 rounded px-1"
      >
        <option value="bash.sh">Bash</option>
        <option value="coffeescript.coffee">CoffeeScript</option>
        <option value="cpp.cpp">C++</option>
        <option value="css.css">CSS</option>
        <option value="go.go">Go</option>
        <option value="haskell.hs">Haskell</option>
        <option value="html.html">HTML</option>
        <option value="java.java">Java</option>
        <option value="javascript.js">JavaScript</option>
        <option value="json.json">JSON</option>
        <option value="kotlin.kt">Kotlin</option>
        <option value="lua.lua">Lua</option>
        <option value="markdown.md">Markdown</option>
        <option value="python.py">Python</option>
        <option value="rust.rs">Rust</option>
        <option value="scala.scala">Scala</option>
        <option value="sql.sql">SQL</option>
        <option value="toml.toml">TOML</option>
        <option value="typescript.ts">TypeScript</option>
        <option value="yaml.yaml">YAML</option>
      </select>
    </div>
    <div :class="flavor">
      <pre class="pt-8">
        <code
          :class="() => `hljs block rounded-md p-4 language-${language.split('.')[0]}`"
          x-ref="sample"
        ></code>
      </pre>
    </div>
  </body>
</html>
