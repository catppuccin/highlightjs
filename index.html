<!DOCTYPE html>
<html lang="en" x-data="{
  language: 'rust.rs',
  flavor: 'catppuccin-mocha',
  changeSample() {
    function encode(e){return e.replace(/[^]/g,function(e){return'&#'+e.charCodeAt(0)+';'})}
    return fetch(`https://raw.githubusercontent.com/catppuccin/catppuccin/main/samples/${this.language}`)
      .then(res => res.text())
      .then(text => {
        $refs.sample.innerHTML = encode(text);
        const classNames = $refs.sample.className.split(' hljs ');
        if (classNames.length == 2) {
          $refs.sample.className = `hljs ${classNames[1]}`;
        }
        $nextTick(() => hljs.highlightElement($refs.sample));
      });
  }
}">
  <head>
    <title>Catppuccin Highlight.js</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="//cdn.tailwindcss.com"></script>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/highlight.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/languages/coffeescript.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/languages/diff.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/languages/haskell.min.js"></script>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/languages/scala.min.js"></script>
    <script defer src="//cdn.jsdelivr.net/npm/alpinejs@3.13.0/dist/cdn.min.js"></script>
    <link rel="stylesheet" :href="() => `/css/${flavor}.css`" />
  </head>
  <body class="min-h-screen mx-auto max-w-3xl relative bg-gray-50 dark:bg-black">
    <div
      class="absolute top-2 right-2 flex gap-4 items-baseline bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-50 rounded px-2 py-1"
    >
      <label for="flavor">Flavor</label>
      <select id="flavor" x-model="flavor" class="border border-gray-500 bg-gray-50 dark:bg-gray-900 rounded px-1">
        <option value="catppuccin-latte">Latte</option>
        <option value="catppuccin-frappe">Frappe</option>
        <option value="catppuccin-macchiato">Macchiato</option>
        <option value="catppuccin-mocha">Mocha</option>
      </select>
      <label for="language">Language</label>
      <select
        id="language"
        x-data="{ langs: { 'AsciiDoc': 'asciidoc.adoc', 'Bash': 'bash.sh', 'CoffeeScript': 'coffeescript.coffee', 'C++': 'cpp.cpp', 'C#': 'cs.cs', 'CSS': 'css.css', 'Dart': 'dart.dart', 'Diff': 'diff.diff', 'Go': 'go.go', 'Haskell': 'haskell.hs', 'HTML': 'html.html', 'Java': 'java.java', 'JavaScript': 'javascript.js', 'JSON': 'json.json', 'JSX': 'jsx.jsx', 'Kotlin': 'kotlin.kt', 'Lua': 'lua.lua', 'Makefile': 'Makefile', 'Markdown': 'markdown.md', 'Nix': 'nix.nix', 'PHP': 'php.php', 'Python': 'python.py', 'Rust': 'rust.rs', 'Scala': 'scala.scala', 'SQL': 'sql.sql', 'TOML': 'toml.toml', 'TSX': 'tsx.tsx', 'TypeScript': 'typescript.ts', 'YAML': 'yaml.yaml' } }"
        x-model="language"
        x-on:change="changeSample()"
        x-init="changeSample()"
        class="border border-gray-500 bg-gray-50 dark:bg-gray-900 rounded px-1"
      >
        <template x-for="[name, file] of Object.entries(langs)">
          <option x-text="name" :selected="file == `${language}`" :value="file"></option>
        </template>
      </select>
    </div>
    <div :class="flavor">
      <pre class="pt-8">
        <code
          :class="() => `hljs block rounded-md p-4 language-${language.split('.')[0]}`"
          x-ref="sample"
        ></code>
      </pre>
    </div>
  </body>
</html>
